<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Passport Photo Maker - Print Cheap Passport Photos Online Free</title>
    <meta name="title" content="Passport Photo Maker - Print Cheap Passport Photos Online Free">
    <meta name="description" content="Free passport photo maker to print cheap passport photos. Create photo sheets with multiple 2x2 inch passport photos. Save money - print 6-20 photos on one sheet at any photo service worldwide. No signup required.">
    <meta name="keywords" content="passport photo maker, cheap passport photo, passport photo print, photo sheet maker, print passport photos, affordable passport photos, passport photo sheet, ID photo maker, visa photo, 2x2 photo, passport size photo, photo printing tool, bulk photo printing, multiple passport photos, passport photo composite, print photos cheap, CVS passport photo, Walgreens passport photo, Costco photo printing, DIY passport photo, make passport photos at home, passport photo template, passport photo layout, free passport photo tool, passport photo software, photo sheet creator, passport photo grid, ID photo print, passport photo arrange, cheap photo printing, save money passport photos, passport photo cost, budget passport photos, online passport photo, passport photo online free, how to print passport photos, print multiple photos one sheet, passport photo 4x6, passport photo 8x10, photo collage passport, passport photo resize, digital passport photo, print your own passport photos">
    <meta name="author" content="Photo Sheet Maker">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="google-site-verification" content="5oz9FT_Li4mZ2d3dGt62HNjMcZd-35MeCmP7gG5xqo4" />
    <link rel="canonical" href="https://aniltv06.github.io/passportphotosheet/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://aniltv06.github.io/passportphotosheet/">
    <meta property="og:title" content="Passport Photo Maker - Print Cheap Passport Photos Online">
    <meta property="og:description" content="Free passport photo maker. Create photo sheets with 6-20 passport photos. Print cheap at any photo service worldwide. Save money - no signup required.">
    <meta property="og:image" content="https://aniltv06.github.io/passportphotosheet/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Photo Sheet Maker">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://aniltv06.github.io/passportphotosheet/">
    <meta name="twitter:title" content="Passport Photo Maker - Print Cheap Passport Photos">
    <meta name="twitter:description" content="Free tool to create passport photo sheets. Print 6-20 photos on one sheet at any photo service worldwide. Save money.">
    <meta name="twitter:image" content="https://aniltv06.github.io/passportphotosheet/twitter-image.jpg">

    <!-- Theme and Mobile -->
    <meta name="theme-color" content="#007AFF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Photo Sheet">
    <meta name="format-detection" content="telephone=no">

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="manifest" href="manifest.json">

    <!-- Dynamic Cache Control - Automatically manages cache based on environment -->
    <!-- Development: Disables cache for easier testing -->
    <!-- Production: Enables cache for better performance -->
    <script type="module" src="js/meta-loader.js"></script>

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://www.google-analytics.com">
    <link rel="preconnect" href="https://www.clarity.ms">

    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.clarity.ms">

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BHSENQTDSF"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-BHSENQTDSF', {
            'anonymize_ip': true,
            'cookie_flags': 'SameSite=None;Secure'
        });
    </script>

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "u9f5jiwh0y");
    </script>

    <!-- Structured Data (Schema.org JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Passport Photo Maker - Photo Sheet Maker",
      "alternateName": ["Cheap Passport Photo Maker", "Passport Photo Sheet Creator", "DIY Passport Photo Tool"],
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Any",
      "description": "Free passport photo maker to create photo sheets for printing cheap passport photos at any photo printing service worldwide. Arrange multiple 2x2 inch passport photos on standard 4x6, 5x7, or 8x10 inch print sheets. Save money by printing 6-20 photos on one sheet. No signup required.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "Upload passport photos",
        "Create photo sheets with 6-20 photos",
        "Multiple print size options (4x6, 5x7, 8x10)",
        "High-quality 300 DPI output",
        "Cutting guides for easy trimming",
        "Print at any photo service worldwide",
        "Save money on passport photos",
        "Instant download",
        "Multi-language support (12 languages)",
        "Works offline",
        "No watermarks",
        "Free forever"
      ],
      "screenshot": "https://aniltv06.github.io/passportphotosheet/screenshot.jpg",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "softwareVersion": "2.0",
      "author": {
        "@type": "Organization",
        "name": "Photo Sheet Maker"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "2840"
      }
    }
    </script>

    <style>
        :root {
            --primary-color: #007AFF;
            --primary-hover: #0051D5;
            --secondary-color: #5856D6;
            --accent-color: #FF2D55;
            --success-color: #34C759;
            --warning-color: #FF9500;
            --danger-color: #FF3B30;
            --text-primary: #1D1D1F;
            --text-secondary: #86868B;
            --background: #FFFFFF;
            --surface: #FFFFFF;
            --border: #D2D2D7;
            --shadow: rgba(0, 0, 0, 0.08);
            --shadow-md: rgba(0, 0, 0, 0.12);
            --shadow-lg: rgba(0, 0, 0, 0.16);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 24px;
            --spacing-xs: 8px;
            --spacing-sm: 12px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;
            --spacing-3xl: 64px;
            --spacing-4xl: 96px;
            --font-system: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        /* Navigation Camera Icon */
        .nav-camera-icon {
            width: 28px;
            height: 28px;
            position: relative;
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }
        .nav-camera-body {
            width: 100%;
            height: 70%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            position: absolute;
            bottom: 50%;
            transform: translateY(50%);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }
        .nav-lens {
            width: 13px;
            height: 13px;
            background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .nav-lens-inner {
            width: 9px;
            height: 9px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.2);
        }
        .nav-lens-glare {
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            position: absolute;
            top: 25%;
            left: 25%;
        }
        .nav-flash {
            width: 5px;
            height: 5px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            position: absolute;
            top: 8%;
            right: 10%;
            box-shadow: 0 1px 3px rgba(255, 165, 0, 0.4);
        }
        .nav-viewfinder {
            width: 4px;
            height: 3px;
            background: #333;
            border-radius: 1px;
            position: absolute;
            top: 8%;
            left: 10%;
        }

        /* Upload Card Specific Styles */
        .workflow-card.upload-card {
            padding: 0;
            overflow: hidden;
        }

        .workflow-card.upload-card .upload-area {
            margin: 0;
            padding: 40px 30px;
            border: 2px dashed var(--border);
            border-radius: var(--radius-lg);
            background: var(--surface);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            min-height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .workflow-card.upload-card .upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(0, 122, 255, 0.02);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px var(--shadow-md);
        }

        .workflow-card.upload-card .upload-area.drag-over {
            border-color: var(--success-color);
            background: rgba(52, 199, 89, 0.05);
            transform: scale(1.02);
        }

        .workflow-card.upload-card .upload-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .workflow-card.upload-card .upload-text {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .workflow-card.upload-card .upload-hint {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-color);
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 0 0 4px 0;
            z-index: 100;
            font-weight: 600;
        }

        .skip-link:focus {
            top: 0;
        }

        body {
            font-family: var(--font-system);
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
        }

        /* Hero Section - Apple Style */
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: var(--spacing-4xl) var(--spacing-lg);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            animation: pulse 10s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
        }

        .hero-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto var(--spacing-xl);
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        .hero-icon svg {
            width: 60px;
            height: 60px;
        }

        /* Hero Camera Icon */
        .hero-camera-icon {
            width: 60px;
            height: 60px;
            position: relative;
        }
        .hero-camera-body {
            width: 100%;
            height: 70%;
            background: white;
            border-radius: 8px;
            position: absolute;
            bottom: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .hero-lens {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow:
                inset 0 1px 3px rgba(0, 0, 0, 0.1),
                0 2px 4px rgba(0, 0, 0, 0.15);
        }
        .hero-lens-inner {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        .hero-lens-glare {
            width: 6px;
            height: 6px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            position: absolute;
            top: 25%;
            left: 25%;
        }
        .hero-flash {
            width: 10px;
            height: 10px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            position: absolute;
            top: 15%;
            right: 15%;
            box-shadow: 0 2px 6px rgba(255, 165, 0, 0.4);
        }
        .hero-viewfinder {
            width: 8px;
            height: 6px;
            background: #333;
            border-radius: 2px;
            position: absolute;
            top: 12%;
            left: 15%;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .hero-title {
            font-size: clamp(48px, 8vw, 72px);
            font-weight: 700;
            color: white;
            margin-bottom: var(--spacing-lg);
            letter-spacing: -2px;
            line-height: 1.1;
        }

        .hero-subtitle {
            font-size: clamp(18px, 3vw, 24px);
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: var(--spacing-2xl);
            font-weight: 400;
            line-height: 1.5;
        }

        .hero-cta {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: 18px 36px;
            background: white;
            color: var(--primary-color);
            border-radius: 980px;
            font-size: 18px;
            font-weight: 600;
            text-decoration: none;
            transition: var(--transition-smooth);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .hero-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
        }

        .scroll-indicator {
            position: absolute;
            bottom: var(--spacing-2xl);
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(10px); }
        }

        .scroll-indicator svg {
            width: 24px;
            height: 24px;
            color: white;
            opacity: 0.7;
        }

        /* Main Content Section */
        .main-content {
            background: var(--background);
            padding: var(--spacing-4xl) 0;
        }

        /* Language Selector */
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 12px;
            padding: 10px 14px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.5);
            transition: var(--transition);
        }

        .language-selector:hover {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .language-selector select {
            border: none;
            background: transparent;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            padding: 4px 24px 4px 8px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%231D1D1F' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
        }

        .language-selector select:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
            border-radius: 4px;
        }

        /* Section Headers */
        .section-header {
            text-align: center;
            margin-bottom: var(--spacing-3xl);
        }

        .section-title {
            font-size: clamp(32px, 5vw, 48px);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
            letter-spacing: -1px;
        }

        .section-subtitle {
            font-size: clamp(16px, 3vw, 20px);
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            display: none; /* Hidden in new design - hero replaces it */
        }

        /* Feature Cards - Glass Morphism */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-3xl);
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.05);
            transition: var(--transition-smooth);
        }

        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.9);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--spacing-lg);
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.3);
        }

        .feature-icon svg {
            width: 30px;
            height: 30px;
            color: white;
        }

        .feature-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .feature-description {
            font-size: 16px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Card */
        .card {
            background: var(--surface);
            border-radius: var(--radius-xl);
            padding: var(--spacing-3xl);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.05);
            margin-bottom: var(--spacing-3xl);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Info Banner - Redesigned */
        .info-banner {
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.05) 0%, rgba(88, 86, 214, 0.05) 100%);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-3xl);
            border-left: 4px solid var(--primary-color);
            border: 1px solid rgba(0, 122, 255, 0.1);
        }

        .info-banner-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .info-banner-list {
            list-style: none;
            padding: 0;
        }

        .info-banner-list li {
            padding: 10px 0;
            color: var(--text-secondary);
            font-size: 16px;
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            line-height: 1.6;
        }

        .info-banner-list li::before {
            content: "‚ú®";
            flex-shrink: 0;
            font-size: 20px;
        }

        /* Upload Section - Modernized */
        .upload-section-wrapper {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-3xl);
            align-items: start;
        }

        .upload-area {
            border: 2px dashed var(--border);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            text-align: center;
            cursor: pointer;
            transition: var(--transition-smooth);
            background: #FAFAFA;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .upload-actions {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
        }

        .action-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.05);
            transition: var(--transition-smooth);
            text-align: center;
        }

        .action-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.9);
        }

        .action-text {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: var(--spacing-md);
            font-weight: 500;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background: #FFFFFF;
            transform: scale(1.01);
            box-shadow: 0 20px 40px rgba(0, 122, 255, 0.1);
        }

        .upload-area.dragover {
            border-color: var(--primary-color);
            background: rgba(0, 122, 255, 0.05);
            transform: scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 122, 255, 0.2);
        }

        .upload-area.has-image {
            border-color: var(--success-color);
            background: rgba(52, 199, 89, 0.05);
            border-style: solid;
            box-shadow: 0 20px 40px rgba(52, 199, 89, 0.15);
        }

        .upload-icon {
            font-size: 64px;
            margin-bottom: var(--spacing-lg);
            opacity: 0.6;
            transition: var(--transition);
            position: relative;
            z-index: 1;
        }

        .upload-area:hover .upload-icon {
            opacity: 1;
            transform: scale(1.1);
        }

        .upload-text {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
            position: relative;
            z-index: 1;
        }

        .upload-hint {
            font-size: 15px;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        .upload-success {
            display: none;
            color: var(--success-color);
            font-weight: 700;
            font-size: 18px;
            margin-top: var(--spacing-md);
            position: relative;
            z-index: 1;
            animation: bounceIn 0.5s;
        }

        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3); }
            50% { transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }

        .upload-area.has-image .upload-success {
            display: block;
        }

        /* Demo Button */
        .demo-btn {
            display: inline-block;
            padding: 14px 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }

        .demo-btn:active {
            transform: translateY(0);
        }

        #fileInput {
            display: none;
        }

        /* Section Title */
        .section-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        /* Customize & Preview Layout */
        .customize-preview-layout {
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: var(--spacing-3xl);
            margin-top: var(--spacing-2xl);
            align-items: start;
        }

        .customize-panel {
            position: sticky;
            top: 100px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.05);
        }

        .customize-panel .section-title {
            font-size: 22px;
            margin-bottom: var(--spacing-lg);
        }

        .preview-panel {
            min-width: 0;
        }

        /* Options Stack */
        .options-stack {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .form-label {
            font-size: 15px;
            font-weight: 700;
            color: var(--text-primary);
            display: block;
        }

        .form-hint {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: -4px;
        }

        .form-select {
            padding: 16px 18px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 16px;
            font-family: var(--font-system);
            background: var(--surface);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='14' height='9' viewBox='0 0 14 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L7 7.5L13 1.5' stroke='%2386868B' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 18px center;
            padding-right: 50px;
            font-weight: 600;
        }

        .form-select:hover {
            border-color: var(--primary-color);
            background-color: #FAFBFC;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.12);
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            text-align: center;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.4);
        }

        .stat-value {
            font-size: 42px;
            font-weight: 800;
            margin-bottom: var(--spacing-xs);
            display: block;
            letter-spacing: -1px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.95;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Canvas Section */
        .canvas-wrapper {
            background: linear-gradient(135deg, #F8F9FA 0%, #E9ECEF 100%);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            margin-bottom: var(--spacing-2xl);
            text-align: center;
            border: 1px solid var(--border);
        }

        .canvas-label {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-lg);
            font-weight: 600;
        }

        .canvas-container {
            display: inline-block;
            position: relative;
            max-width: 100%;
        }

        canvas {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-md);
            box-shadow: 0 12px 40px var(--shadow-lg);
            background: white;
            display: block;
        }

        /* Buttons */
        .button-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: var(--spacing-md);
        }

        .btn {
            padding: 18px 32px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 17px;
            font-weight: 700;
            font-family: var(--font-system);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            text-decoration: none;
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(135deg, #007AFF 0%, #0051D5 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(0, 122, 255, 0.4);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 122, 255, 0.5);
        }

        .btn-primary:active:not(:disabled) {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--text-primary);
            border: 2px solid var(--border);
            box-shadow: 0 2px 8px var(--shadow);
        }

        .btn-secondary::before {
            display: none;
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--background);
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-md);
        }

        /* Preview Section */
        .preview-section {
            display: none;
        }

        .preview-section.active {
            display: block;
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Instructions */
        .instructions {
            background: var(--surface);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            margin-top: var(--spacing-xl);
            box-shadow: 0 8px 32px var(--shadow-lg);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .instructions-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xl);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .instructions-list {
            list-style: none;
            counter-reset: step;
        }

        .instructions-list li {
            counter-increment: step;
            padding: var(--spacing-lg) 0;
            color: var(--text-secondary);
            font-size: 16px;
            display: flex;
            gap: var(--spacing-lg);
            line-height: 1.7;
        }

        .instructions-list li::before {
            content: counter(step);
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 800;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }

        /* Footer */
        .footer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            margin-top: var(--spacing-xl);
            box-shadow: 0 8px 32px var(--shadow-lg);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Footer styles moved to css/common.css */

        /* Responsive */
        @media (max-width: 1024px) {
            .customize-preview-layout {
                grid-template-columns: 1fr;
                gap: var(--spacing-xl);
            }

            .customize-panel {
                position: relative;
                top: 0;
            }
        }

        @media (max-width: 768px) {
            .hero {
                min-height: 90vh;
                padding: var(--spacing-3xl) var(--spacing-md);
            }

            .hero-icon {
                width: 90px;
                height: 90px;
            }

            .hero-icon svg {
                width: 45px;
                height: 45px;
            }

            .hero-title {
                font-size: 36px;
            }

            .hero-subtitle {
                font-size: 18px;
            }

            .hero-cta {
                padding: 16px 28px;
                font-size: 16px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .language-selector {
                top: 10px;
                right: 10px;
            }

            .card {
                padding: var(--spacing-xl);
            }

            .header {
                padding-top: var(--spacing-lg);
            }

            .stat-value {
                font-size: 32px;
            }

            .button-group {
                grid-template-columns: 1fr;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .upload-section-wrapper {
                grid-template-columns: 1fr;
            }

            .upload-actions {
                margin-top: var(--spacing-lg);
            }

            .instructions {
                padding: var(--spacing-xl);
            }

            .footer {
                padding: var(--spacing-xl);
            }

            .main-content {
                padding: var(--spacing-xl) 0;
            }
        }

        /* Accessibility */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Enhanced Focus Styles */
        *:focus-visible {
            outline: 3px solid var(--primary-color);
            outline-offset: 3px;
            border-radius: 4px;
        }

        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            :root {
                --border: #000000;
                --text-secondary: #000000;
            }
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Loading State */
        .loading::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 32px;
            height: 32px;
            margin: -16px 0 0 -16px;
            border: 4px solid var(--primary-color);
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Print styles */
        @media print {
            body {
                background: white;
            }
            .card, .instructions, .footer {
                box-shadow: none;
            }
            .btn, .upload-area, .info-banner, .footer, .language-selector {
                display: none;
            }
        }
    </style>

    <!-- UX Component Styles -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/ux-components.css">
</head>
<body>
    <!-- Skip Link for Screen Readers -->
    <a href="#main-content" class="skip-link" data-i18n="skipToContent">Skip to main content</a>

    <!-- NAVIGATION HEADER -->
    <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <!-- Logo -->
            <a href="index.html" class="nav-logo" aria-label="Home">
                <div class="nav-camera-icon">
                    <div class="nav-camera-body">
                        <div class="nav-viewfinder"></div>
                        <div class="nav-flash"></div>
                        <div class="nav-lens">
                            <div class="nav-lens-inner">
                                <div class="nav-lens-glare"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <span>Photo Sheet Maker</span>
            </a>

            <!-- Navigation Links -->
            <div class="nav-links">
                <a href="index.html" class="nav-link active" aria-current="page">
                    <span data-i18n="photoMaker">Photo Maker</span>
                </a>
                <a href="photo-editor.html" class="nav-link featured">
                    ‚úÇÔ∏è <span data-i18n="photoEditor">Photo Editor</span>
                </a>
                <a href="faq.html" class="nav-link">
                    <span data-i18n="help">Help</span>
                </a>
            </div>

            <!-- Language Selector -->
            <select id="languageSelect" class="nav-language" aria-label="Select language">
                <option value="en">üá∫üá∏ English</option>
                <option value="es">üá™üá∏ Espa√±ol</option>
                <option value="fr">üá´üá∑ Fran√ßais</option>
                <option value="de">üá©üá™ Deutsch</option>
                <option value="pt">üáµüáπ Portugu√™s</option>
                <option value="it">üáÆüáπ Italiano</option>
                <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
                <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                <option value="hi">üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
            </select>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
                ‚ò∞
            </button>
        </div>
    </nav>

    <!-- Container for main content -->
    <div class="container">
        <!-- WORKFLOW SELECTOR -->
        <section class="workflow-selector" aria-labelledby="workflow-title">
            <h2 id="workflow-title" data-i18n="chooseWorkflow">Choose Your Workflow</h2>

            <div class="workflow-options">
                <!-- Option 1: Upload Ready Photo -->
                <div class="workflow-card upload-card" tabindex="0" aria-label="I have a ready photo">
                    <!-- Upload UI will be dynamically generated by photoHandler.js -->
                    <div id="uploadContainer"></div>
                </div>

                <!-- Option 2: Need to Edit Photo (Featured) -->
                <div class="workflow-card featured" tabindex="0" role="button" aria-label="I need to edit a photo">
                    <div class="workflow-icon">‚úÇÔ∏è</div>
                    <h3 data-i18n="needToEdit">I Need to Edit a Photo</h3>
                    <p data-i18n="needToEditDesc">Crop, resize, or rotate first</p>
                    <a href="photo-editor.html" class="btn">
                        <span data-i18n="openPhotoEditor">Open Photo Editor</span>
                    </a>
                </div>
            </div>

            <!-- Demo Button Below Workflow Cards -->
            <div style="text-align: center; margin-top: 20px;">
                <button type="button" class="demo-btn" id="demoBtn" aria-label="Try with demo photo" style="font-size: 14px; padding: 10px 20px;">
                    <span data-i18n="tryDemo">üé® Try Demo Photo</span>
                </button>
            </div>
        </section>
    </div>

    <!-- Main Content -->
    <div class="main-content">
    <div class="container">
        <header class="header" role="banner">
            <span class="header-icon" aria-hidden="true">üì∏</span>
            <h1 class="header-title" data-i18n="title">Photo Sheet Maker</h1>
            <p class="header-subtitle" data-i18n="subtitle">Create professional passport photo sheets for printing anywhere in the world</p>
        </header>

        <!-- Feature Cards Section -->
        <section class="feature-grid" style="margin-bottom: var(--spacing-4xl);">
            <div class="feature-card">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                </div>
                <h3 class="feature-title" data-i18n="feature1Title">Upload Your Photo</h3>
                <p class="feature-description" data-i18n="feature1Desc">Simply upload your 2√ó2 inch passport photo. Works with JPG and PNG formats.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm10 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zm10 0a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z" />
                    </svg>
                </div>
                <h3 class="feature-title" data-i18n="feature2Title">Customize Layout</h3>
                <p class="feature-description" data-i18n="feature2Desc">Choose from 4√ó6, 5√ó7, or 8√ó10 inch sheets. Fit up to 20 photos on one sheet.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                </div>
                <h3 class="feature-title" data-i18n="feature3Title">Download & Print</h3>
                <p class="feature-description" data-i18n="feature3Desc">Download high-quality 300 DPI images. Print at any photo service worldwide.</p>
            </div>
        </section>

        <main id="main-content" role="main">
            <div class="card">
                <div class="info-banner" role="complementary" aria-label="Quick start guide">
                    <h2 class="info-banner-title">
                        <span aria-hidden="true">üí°</span>
                        <span data-i18n="benefitsTitle">Why Use Photo Sheet Maker?</span>
                    </h2>
                    <ul class="info-banner-list">
                        <li data-i18n="benefit1">Upload your 2√ó2 inch (51√ó51mm) passport or ID photo</li>
                        <li data-i18n="benefit2">Arrange multiple copies on one standard print sheet</li>
                        <li data-i18n="benefit3">Download and print at any photo printing service worldwide</li>
                        <li data-i18n="benefit4">Save money - print up to 20 photos on a single sheet!</li>
                        <li data-i18n="benefit5">100% free, no watermarks, no signup required</li>
                    </ul>
                    <p style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(0,122,255,0.2); font-size: 13px; color: #666; line-height: 1.5;">
                        <strong>‚ö†Ô∏è Important Disclaimer:</strong> This tool arranges photos on a sheet for printing. You are responsible for ensuring your original photo meets official passport/ID requirements. We do not guarantee acceptance by any authority. Use at your own discretion. See <a href="terms-of-service.html" style="color: #007AFF;">Terms of Service</a>.
                    </p>
                </div>

                <!-- PROGRESS INDICATORS -->
                <div class="progress-steps" id="progressSteps" style="display: none;">
                    <div class="step completed" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label" data-i18n="stepUpload">Upload</div>
                    </div>

                    <div class="step-connector"></div>

                    <div class="step active" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label" data-i18n="stepCustomize">Customize</div>
                    </div>

                    <div class="step-connector"></div>

                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label" data-i18n="stepDownload">Download</div>
                    </div>
                </div>

                <section class="preview-section" id="previewSection" aria-label="Preview and download your photo sheet">
                    <div class="customize-preview-layout">
                        <!-- Left Side: Customization Options -->
                        <div class="customize-panel">
                            <h2 class="section-title">
                                <span aria-hidden="true">‚öôÔ∏è</span>
                                <span data-i18n="customizeTitle">Customize Your Sheet</span>
                            </h2>

                            <form class="options-stack" id="optionsForm">
                                <div class="form-group">
                                    <label for="paperSize" class="form-label" data-i18n="sheetSizeLabel">Sheet Size</label>
                                    <select id="paperSize" class="form-select" aria-label="Select print sheet size">
                                        <option value="4x6" selected data-i18n="size4x6">Standard 4√ó6" Print (6 photos)</option>
                                        <option value="5x7" data-i18n="size5x7">Medium 5√ó7" Print (6 photos)</option>
                                        <option value="8x10" data-i18n="size8x10">Large 8√ó10" Print (20 photos) ‚≠ê Best Value</option>
                                    </select>
                                    <div class="form-hint" data-i18n="sheetSizeHint">Choose the print size you want to order</div>
                                </div>

                                <div class="form-group">
                                    <label for="quality" class="form-label" data-i18n="qualityLabel">Photo Quality</label>
                                    <select id="quality" class="form-select" aria-label="Select photo print quality">
                                        <option value="high" data-i18n="qualityHigh">Professional (300 DPI) ‚≠ê Recommended</option>
                                        <option value="medium" data-i18n="qualityMedium">Standard (200 DPI)</option>
                                    </select>
                                    <div class="form-hint" data-i18n="qualityHint">Higher quality for clearer photos</div>
                                </div>

                                <div class="form-group">
                                    <label for="cuttingGuide" class="form-label" data-i18n="cuttingGuideLabel">Cutting Guide</label>
                                    <select id="cuttingGuide" class="form-select" aria-label="Select cutting guide option">
                                        <option value="none-none" selected data-i18n="guideNoGuides">No Guides (Maximum Photos) ‚≠ê</option>
                                        <option value="small-none" data-i18n="guideCuttingLines">Cutting Lines Between Photos</option>
                                        <option value="none-thin" data-i18n="guideBorderGuide">Border Guide Inside Photos</option>
                                        <option value="small-thin" data-i18n="guideFullGuidance">Full Guidance (Lines + Border)</option>
                                    </select>
                                    <div class="form-hint" id="cuttingGuideHint">
                                        <span data-i18n="cuttingGuideHint">Choose how you want to cut your photos</span>
                                        <span id="cuttingGuideDisabledHint" style="display: none; color: var(--warning-color);" data-i18n="cuttingGuideDisabledHint">Not available for this sheet size</span>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Right Side: Preview -->
                        <div class="preview-panel">
                            <h2 class="section-title">
                                <span aria-hidden="true">üëÅÔ∏è</span>
                                <span data-i18n="previewTitle">Your Photo Sheet</span>
                            </h2>

                            <div class="canvas-wrapper">
                                <div class="canvas-label" data-i18n="canvasLabel">Preview of your photo sheet</div>
                                <div class="canvas-container">
                                    <canvas id="canvas" role="img" aria-label="Preview of your photo sheet layout"></canvas>
                                </div>
                            </div>

                            <div class="stats-grid">
                                <div class="stat-card">
                                    <span class="stat-value" id="photoCount">20</span>
                                    <span class="stat-label" data-i18n="statPhotos">Photos Included</span>
                                </div>
                                <div class="stat-card">
                                    <span class="stat-value" id="sheetSize">8√ó10"</span>
                                    <span class="stat-label" data-i18n="statSize">Print Size</span>
                                </div>
                            </div>

                            <div class="button-group">
                                <button type="button" class="btn btn-primary" id="downloadBtn" aria-label="Download your photo sheet">
                                    <span aria-hidden="true">‚¨áÔ∏è</span>
                                    <span data-i18n="downloadBtn">Download Photo Sheet</span>
                                </button>
                                <button type="button" class="btn btn-secondary" id="resetBtn" aria-label="Start over with a new photo">
                                    <span aria-hidden="true">‚Üª</span>
                                    <span data-i18n="resetBtn">Start Over</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <aside class="instructions" role="complementary">
                <h2 class="instructions-title">
                    <span aria-hidden="true">üìã</span>
                    <span data-i18n="instructionsTitle">How to Print Your Photos</span>
                </h2>
                <ol class="instructions-list">
                    <li data-i18n="instruction1">Click "Download Photo Sheet" above to save your file</li>
                    <li data-i18n="instruction2">Visit your local photo printing service or online print shop</li>
                    <li data-i18n="instruction3">Select "Print Photos" and upload your downloaded file</li>
                    <li data-i18n="instruction4">Choose the same size you selected above (4√ó6", 5√ó7", or 8√ó10")</li>
                    <li data-i18n="instruction5">Select "Matte Finish" for best results with passport photos</li>
                    <li data-i18n="instruction6">Order pickup or delivery based on your preference</li>
                    <li data-i18n="instruction7">Cut carefully along the edges using scissors or a paper cutter</li>
                </ol>
            </aside>
        </main>
    </div>
    </div>
    <!-- End Main Content -->

        <!-- Footer Container - Loaded from components/footer.html -->
        <div id="footer-container"></div>
    </div>

    <!-- Load translations from modular structure -->
    <script type="module" src="translations/index.js"></script>

    <script>
        'use strict';

        // Translations are now loaded from translations/index.js module
        // The module automatically assigns to window.translations
        // Keeping this as a fallback for file:// protocol compatibility
        const translations = window.translations || {};

        // i18n functionality
        let currentLanguage = localStorage.getItem('preferredLanguage') || 'en';

        function translatePage(lang) {
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            document.documentElement.lang = lang;
            localStorage.setItem('preferredLanguage', lang);
        }

        // Language selector
        const languageSelect = document.getElementById('languageSelect');
        languageSelect.value = currentLanguage;
        languageSelect.addEventListener('change', (e) => {
            currentLanguage = e.target.value;
            translatePage(currentLanguage);
            trackEvent('language_changed', { language: currentLanguage });
        });

        // Initialize translation
        translatePage(currentLanguage);

        // Analytics Helper Functions
        function trackEvent(eventName, eventParams = {}) {
            // Google Analytics 4
            if (typeof gtag === 'function') {
                gtag('event', eventName, eventParams);
            }

            // Microsoft Clarity Custom Tags
            if (typeof clarity === 'function') {
                clarity('set', eventName, JSON.stringify(eventParams));
            }
        }

        function trackPageView() {
            if (typeof gtag === 'function') {
                gtag('event', 'page_view', {
                    page_title: document.title,
                    page_location: window.location.href,
                    page_path: window.location.pathname
                });
            }
        }

        // DOM Elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const paperSize = document.getElementById('paperSize');
        const quality = document.getElementById('quality');
        const cuttingGuide = document.getElementById('cuttingGuide');
        const previewSection = document.getElementById('previewSection');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d', { alpha: false });
        const downloadBtn = document.getElementById('downloadBtn');
        const resetBtn = document.getElementById('resetBtn');
        const demoBtn = document.getElementById('demoBtn');
        const photoCount = document.getElementById('photoCount');
        const sheetSize = document.getElementById('sheetSize');

        // State
        let uploadedImage = null;

        // Configuration
        const LAYOUTS = {
            '4x6': { width: 4, height: 6, cols: 2, rows: 3, photos: 6, icon: 'üí∞' },
            '5x7': { width: 5, height: 7, cols: 2, rows: 3, photos: 6, icon: 'üíµ' },
            '8x10': { width: 8, height: 10, cols: 4, rows: 5, photos: 20, icon: 'üíé' }
        };

        const PHOTO_SIZE_INCHES = 2;

        // Utility Functions
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function showError(message) {
            alert(message);
            console.error(message);
        }

        function announceToScreenReader(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('role', 'status');
            announcement.setAttribute('aria-live', 'polite');
            announcement.className = 'visually-hidden';
            announcement.textContent = message;
            document.body.appendChild(announcement);
            setTimeout(() => announcement.remove(), 1000);
        }

        function validateImageFile(file) {
            // Basic check to ensure it's an image file
            if (!file.type.startsWith('image/')) {
                throw new Error(translations[currentLanguage]?.errorImageUpload || 'Please upload an image file.');
            }

            return true;
        }

        // ======================================
        // Photo Upload - Now handled by photoHandler module
        // See: js/photoHandler.js and js/photoHandler-index.js
        // Integration script at bottom of file
        // ======================================

        // Event Listeners - Options
        const handleOptionsChange = debounce(() => {
            if (uploadedImage) {
                createComposite();
                announceToScreenReader(translations[currentLanguage]?.srPhotoSheetUpdated || 'Photo sheet updated with new settings.');

                // Track option changes
                const [spacing, border] = cuttingGuide.value.split('-');
                trackEvent('options_changed', {
                    paper_size: paperSize.value,
                    quality: quality.value,
                    cutting_guide: cuttingGuide.value,
                    spacing: spacing,
                    border: border
                });
            }
        }, 100);

        // Update cutting guide availability based on paper size
        function updateCuttingGuideAvailability() {
            const size = paperSize.value;
            const cuttingGuideDisabledHint = document.getElementById('cuttingGuideDisabledHint');
            const currentValue = cuttingGuide.value;
            const [currentSpacing, currentBorder] = currentValue.split('-');

            // Only 5x7 has margins for cutting lines
            // 4x6 and 8x10 are edge-to-edge and photos would be scaled down
            const disableCuttingLines = (size === '4x6' || size === '8x10');

            // Get all options
            const options = cuttingGuide.querySelectorAll('option');
            let shouldResetValue = false;

            options.forEach(option => {
                const [spacing, border] = option.value.split('-');

                // Disable options that have cutting lines (spacing='small') for 4x6 and 8x10
                if (spacing === 'small' && disableCuttingLines) {
                    option.disabled = true;
                    option.style.color = '#999';

                    // If current selection is being disabled, we need to reset
                    if (option.value === currentValue) {
                        shouldResetValue = true;
                    }
                } else {
                    option.disabled = false;
                    option.style.color = '';
                }
            });

            // Reset to "none-none" if current selection was disabled
            if (shouldResetValue) {
                cuttingGuide.value = 'none-none';
            }

            // Show/hide disabled hint
            if (disableCuttingLines && currentSpacing === 'small') {
                cuttingGuideDisabledHint.style.display = 'block';
            } else {
                cuttingGuideDisabledHint.style.display = 'none';
            }
        }

        paperSize.addEventListener('change', () => {
            updateCuttingGuideAvailability();
            handleOptionsChange();
        });
        quality.addEventListener('change', handleOptionsChange);
        cuttingGuide.addEventListener('change', handleOptionsChange);

        // Initialize cutting guide availability
        updateCuttingGuideAvailability();

        // Create Composite Function
        function createComposite() {
            const size = paperSize.value;
            const layout = LAYOUTS[size];
            const dpi = quality.value === 'high' ? 300 : 200;

            // Parse cutting guide value (format: "spacing-border")
            const [spacing, border] = cuttingGuide.value.split('-');
            const gapEnabled = spacing === 'small';
            const gapSize = gapEnabled ? 0.05 : 0; // 0.05 inches gap
            const borderEnabled = border === 'thin';

            // Update stats
            photoCount.textContent = layout.photos;
            sheetSize.textContent = size.replace('x', '√ó') + '"';

            // Calculate dimensions
            const canvasWidth = layout.width * dpi;
            const canvasHeight = layout.height * dpi;
            const photoSizePx = PHOTO_SIZE_INCHES * dpi;
            const gapSizePx = gapSize * dpi;

            // Set canvas size
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;

            // Fill background
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(0, 0, canvasWidth, canvasHeight);

            // Calculate grid positioning
            const totalPhotosWidth = (layout.cols * photoSizePx) + ((layout.cols - 1) * gapSizePx);
            const totalPhotosHeight = (layout.rows * photoSizePx) + ((layout.rows - 1) * gapSizePx);
            const startX = (canvasWidth - totalPhotosWidth) / 2;
            const startY = (canvasHeight - totalPhotosHeight) / 2;

            // Enable image smoothing for better quality
            ctx.imageSmoothingEnabled = true;
            ctx.imageSmoothingQuality = 'high';

            // Draw photos in grid
            for (let row = 0; row < layout.rows; row++) {
                for (let col = 0; col < layout.cols; col++) {
                    const x = startX + (col * (photoSizePx + gapSizePx));
                    const y = startY + (row * (photoSizePx + gapSizePx));

                    // Draw the image
                    ctx.drawImage(uploadedImage, x, y, photoSizePx, photoSizePx);

                    // Draw cutting guides if spacing is enabled
                    if (gapEnabled) {
                        ctx.strokeStyle = '#CCCCCC';
                        ctx.lineWidth = 1;
                        ctx.strokeRect(x, y, photoSizePx, photoSizePx);
                    }

                    // Draw thin border inside photo if enabled
                    if (borderEnabled) {
                        ctx.strokeStyle = '#CCCCCC';
                        ctx.lineWidth = Math.max(0.5, dpi / 150); // Very thin line scaled to DPI
                        const borderOffset = ctx.lineWidth / 2; // Offset to draw inside
                        ctx.strokeRect(
                            x + borderOffset,
                            y + borderOffset,
                            photoSizePx - ctx.lineWidth,
                            photoSizePx - ctx.lineWidth
                        );
                    }
                }
            }
        }

        // Download Handler
        downloadBtn.addEventListener('click', () => {
            try {
                const link = document.createElement('a');
                const size = paperSize.value;
                const timestamp = new Date().toISOString().slice(0, 10);
                link.download = `photo-sheet-${size}-${timestamp}.jpg`;
                link.href = canvas.toDataURL('image/jpeg', 0.95);
                link.click();

                announceToScreenReader(translations[currentLanguage]?.srDownloadSuccess || 'Your photo sheet has been downloaded successfully.');

                // Track download event
                const [spacing, border] = cuttingGuide.value.split('-');
                trackEvent('photo_sheet_downloaded', {
                    paper_size: size,
                    quality: quality.value,
                    cutting_guide: cuttingGuide.value,
                    has_cutting_guides: spacing !== 'none' || border !== 'none',
                    photo_count: LAYOUTS[size].photos,
                    language: currentLanguage
                });
            } catch (error) {
                showError(translations[currentLanguage]?.errorDownloadFailed || 'Could not download the file. Please try again.');
                trackEvent('download_error', { error: error.message });
                console.error(error);
            }
        });

        // Reset Handler - Now handled by photoHandler module
        // See integration script at bottom of file
        // The handler will be connected there to use handleStartOver()

        // Demo Button Handler
        demoBtn.addEventListener('click', () => {
            // Create a canvas to draw the demo photo
            const demoCanvas = document.createElement('canvas');
            demoCanvas.width = 600;
            demoCanvas.height = 600;
            const demoCtx = demoCanvas.getContext('2d');

            // Background
            const gradient = demoCtx.createLinearGradient(0, 0, 600, 600);
            gradient.addColorStop(0, '#e8f4f8');
            gradient.addColorStop(1, '#d4e8f0');
            demoCtx.fillStyle = gradient;
            demoCtx.fillRect(0, 0, 600, 600);

            // Passport photo standards: head centered with proper framing
            // Head (reduced size with more top gap)
            demoCtx.fillStyle = '#ffd4a3';
            demoCtx.beginPath();
            demoCtx.ellipse(300, 350, 130, 135, 0, 0, Math.PI * 2);
            demoCtx.fill();

            // Ears - visible and realistic
            demoCtx.fillStyle = '#f5c897';
            // Left ear
            demoCtx.beginPath();
            demoCtx.ellipse(175, 330, 18, 35, -0.15, 0, Math.PI * 2);
            demoCtx.fill();
            // Left ear inner detail
            demoCtx.fillStyle = '#e8b885';
            demoCtx.beginPath();
            demoCtx.ellipse(180, 330, 8, 20, -0.15, 0, Math.PI * 2);
            demoCtx.fill();

            // Right ear
            demoCtx.fillStyle = '#f5c897';
            demoCtx.beginPath();
            demoCtx.ellipse(425, 330, 18, 35, 0.15, 0, Math.PI * 2);
            demoCtx.fill();
            // Right ear inner detail
            demoCtx.fillStyle = '#e8b885';
            demoCtx.beginPath();
            demoCtx.ellipse(420, 330, 8, 20, 0.15, 0, Math.PI * 2);
            demoCtx.fill();

            // Hair - fuller, more natural coverage
            demoCtx.fillStyle = '#4a3428';

            // Main hair mass - covers most of top head
            demoCtx.beginPath();
            demoCtx.ellipse(300, 200, 155, 135, 0, 0, Math.PI * 2);
            demoCtx.fill();

            // Hair sides - fuller coverage near face
            demoCtx.beginPath();
            demoCtx.ellipse(200, 280, 45, 75, -0.15, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.beginPath();
            demoCtx.ellipse(400, 280, 45, 75, 0.15, 0, Math.PI * 2);
            demoCtx.fill();

            // Front hairline - natural and fuller
            demoCtx.beginPath();
            demoCtx.moveTo(230, 235);
            demoCtx.quadraticCurveTo(265, 250, 300, 252);
            demoCtx.quadraticCurveTo(335, 250, 370, 235);
            demoCtx.quadraticCurveTo(340, 218, 300, 215);
            demoCtx.quadraticCurveTo(260, 218, 230, 235);
            demoCtx.fill();

            // Add some hair texture/strands for realism
            demoCtx.strokeStyle = '#3a2820';
            demoCtx.lineWidth = 2;
            demoCtx.lineCap = 'round';
            // Left side strands
            for (let i = 0; i < 3; i++) {
                demoCtx.beginPath();
                demoCtx.moveTo(235 + i * 15, 240);
                demoCtx.quadraticCurveTo(245 + i * 15, 260, 240 + i * 15, 280);
                demoCtx.stroke();
            }
            // Right side strands
            for (let i = 0; i < 3; i++) {
                demoCtx.beginPath();
                demoCtx.moveTo(325 + i * 15, 240);
                demoCtx.quadraticCurveTo(335 + i * 15, 260, 340 + i * 15, 280);
                demoCtx.stroke();
            }

            // Face shading for depth (prevents mask look)
            demoCtx.fillStyle = 'rgba(0, 0, 0, 0.03)';
            // Left side of face
            demoCtx.beginPath();
            demoCtx.ellipse(210, 350, 40, 100, -0.2, 0, Math.PI * 2);
            demoCtx.fill();
            // Right side of face
            demoCtx.beginPath();
            demoCtx.ellipse(390, 350, 40, 100, 0.2, 0, Math.PI * 2);
            demoCtx.fill();

            // Eyebrows
            demoCtx.fillStyle = '#3a2820';
            demoCtx.beginPath();
            demoCtx.ellipse(255, 300, 25, 4, -0.09, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.beginPath();
            demoCtx.ellipse(345, 300, 25, 4, 0.09, 0, Math.PI * 2);
            demoCtx.fill();

            // Eyes (at ~55% from top for passport standard)
            demoCtx.strokeStyle = '#2a2a2a';
            demoCtx.lineWidth = 3;
            demoCtx.fillStyle = '#ffffff';
            // Left eye
            demoCtx.beginPath();
            demoCtx.ellipse(255, 335, 24, 30, 0, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.stroke();
            // Right eye
            demoCtx.beginPath();
            demoCtx.ellipse(345, 335, 24, 30, 0, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.stroke();

            // Iris
            const irisGradient = demoCtx.createRadialGradient(255, 340, 0, 255, 340, 16);
            irisGradient.addColorStop(0, '#4a90e2');
            irisGradient.addColorStop(1, '#2e5c8a');
            demoCtx.fillStyle = irisGradient;
            demoCtx.beginPath();
            demoCtx.arc(255, 340, 16, 0, Math.PI * 2);
            demoCtx.fill();
            const irisGradient2 = demoCtx.createRadialGradient(345, 340, 0, 345, 340, 16);
            irisGradient2.addColorStop(0, '#4a90e2');
            irisGradient2.addColorStop(1, '#2e5c8a');
            demoCtx.fillStyle = irisGradient2;
            demoCtx.beginPath();
            demoCtx.arc(345, 340, 16, 0, Math.PI * 2);
            demoCtx.fill();

            // Pupils
            demoCtx.fillStyle = '#1a1a1a';
            demoCtx.beginPath();
            demoCtx.arc(255, 340, 8, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.beginPath();
            demoCtx.arc(345, 340, 8, 0, Math.PI * 2);
            demoCtx.fill();

            // Eye shine
            demoCtx.fillStyle = '#ffffff';
            demoCtx.beginPath();
            demoCtx.arc(250, 333, 5, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.beginPath();
            demoCtx.arc(340, 333, 5, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.beginPath();
            demoCtx.arc(260, 345, 3, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.beginPath();
            demoCtx.arc(350, 345, 3, 0, Math.PI * 2);
            demoCtx.fill();

            // Nose
            demoCtx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            demoCtx.beginPath();
            demoCtx.ellipse(300, 375, 4, 2, 0, 0, Math.PI * 2);
            demoCtx.fill();
            // Nose bridge shadow
            demoCtx.strokeStyle = 'rgba(0, 0, 0, 0.08)';
            demoCtx.lineWidth = 1.5;
            demoCtx.beginPath();
            demoCtx.moveTo(300, 350);
            demoCtx.lineTo(300, 373);
            demoCtx.stroke();

            // Mouth
            demoCtx.strokeStyle = '#d4766a';
            demoCtx.lineWidth = 3;
            demoCtx.fillStyle = '#ffffff';
            demoCtx.beginPath();
            demoCtx.arc(300, 400, 24, 0, Math.PI, false);
            demoCtx.stroke();
            demoCtx.fill();
            demoCtx.beginPath();
            demoCtx.moveTo(290, 400);
            demoCtx.lineTo(310, 400);
            demoCtx.stroke();

            // Cheeks
            demoCtx.fillStyle = 'rgba(255, 182, 193, 0.4)';
            demoCtx.beginPath();
            demoCtx.ellipse(220, 385, 16, 11, 0, 0, Math.PI * 2);
            demoCtx.fill();
            demoCtx.beginPath();
            demoCtx.ellipse(380, 385, 16, 11, 0, 0, Math.PI * 2);
            demoCtx.fill();

            // Neck
            demoCtx.fillStyle = '#ffc999';
            demoCtx.beginPath();
            demoCtx.moveTo(250, 495);
            demoCtx.lineTo(250, 545);
            demoCtx.quadraticCurveTo(300, 565, 350, 545);
            demoCtx.lineTo(350, 495);
            demoCtx.closePath();
            demoCtx.fill();

            // Shoulders/Shirt - Curved and natural looking, stretched to edges
            demoCtx.fillStyle = '#4a6fa5';
            demoCtx.beginPath();
            // Left shoulder curve - starts from left edge
            demoCtx.moveTo(0, 600);
            demoCtx.quadraticCurveTo(100, 510, 250, 535);
            // Neckline
            demoCtx.lineTo(250, 550);
            demoCtx.quadraticCurveTo(300, 565, 350, 550);
            demoCtx.lineTo(350, 535);
            // Right shoulder curve - extends to right edge
            demoCtx.quadraticCurveTo(500, 510, 600, 600);
            // Complete the shape
            demoCtx.lineTo(600, 600);
            demoCtx.lineTo(0, 600);
            demoCtx.closePath();
            demoCtx.fill();

            // Collar
            demoCtx.fillStyle = '#ffffff';
            demoCtx.beginPath();
            demoCtx.moveTo(260, 550);
            demoCtx.lineTo(270, 590);
            demoCtx.lineTo(330, 590);
            demoCtx.lineTo(340, 550);
            demoCtx.closePath();
            demoCtx.fill();

            // Convert canvas to image
            const img = new Image();
            img.onload = () => {
                uploadedImage = img;
                // Don't add has-image class - keep upload area available
                createComposite();
                previewSection.classList.add('active');
                announceToScreenReader(translations[currentLanguage]?.srDemoLoaded || 'Demo photo loaded successfully. Your photo sheet preview is ready.');

                // Track demo usage
                trackEvent('demo_photo_used', {
                    language: currentLanguage
                });

                // Smooth scroll to preview
                setTimeout(() => {
                    previewSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 100);
            };
            img.src = demoCanvas.toDataURL('image/png');
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && uploadedImage) {
                resetBtn.click();
            }
        });

        // Initialize
        ctx.imageSmoothingEnabled = true;
        ctx.imageSmoothingQuality = 'high';
        // Photo loading from storage now handled by photoHandler module
        // See integration script at bottom of file

        // Register Service Worker for PWA support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then((registration) => {
                        console.log('ServiceWorker registration successful:', registration.scope);

                        // Check for updates periodically
                        setInterval(() => {
                            registration.update();
                        }, 60000); // Check every minute
                    })
                    .catch((error) => {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }

        // Track page view on load
        trackPageView();
    </script>

    <!-- UX Components Initialization -->
    <script type="module">
        import {
            initMobileNav,
            initWorkflowSelector,
            initEditorBanner,
            initTooltips,
            initStickyNav,
            ProgressSteps,
            OnboardingModal
        } from './js/ux-components.js';

        // Import common utilities
        import { initCommon } from './js/common.js';

        // Initialize UX components
        document.addEventListener('DOMContentLoaded', async () => {
            // Inline footer loading (no module needed for file:// protocol)
            const footerContainer = document.getElementById('footer-container');
            if (footerContainer) {
                footerContainer.innerHTML = `
                    <footer class="footer" role="contentinfo">
                        <div class="footer-content">
                            <ul class="footer-links">
                                <li><a href="privacy-policy.html" data-i18n="privacyPolicy">Privacy Policy</a></li>
                                <li><a href="terms-of-service.html" data-i18n="termsOfService">Terms of Service</a></li>
                                <li><a href="contact.html" data-i18n="contact">Contact Us</a></li>
                                <li><a href="faq.html" data-i18n="faq">FAQ</a></li>
                            </ul>
                            <p class="footer-text" data-i18n="footerText">
                                All processing happens in your browser. Your photos are never uploaded to any server.
                                This tool is completely free and respects your privacy.
                            </p>
                            <p class="footer-copyright">
                                &copy; <span id="currentYear"></span> Photo Sheet Maker. <span data-i18n="allRights">All rights reserved</span>.
                            </p>
                            <p class="footer-designer">
                                Designed by Anil Kumar Thatha Venkatachalapathy
                            </p>
                        </div>
                    </footer>
                `;

                // Set current year
                const yearEl = document.getElementById('currentYear');
                if (yearEl) {
                    yearEl.textContent = new Date().getFullYear();
                }
            }

            // Load and initialize UX components if available
            if (window.location.protocol !== 'file:') {
                try {
                    const { initMobileNav, initWorkflowSelector, initEditorBanner, initTooltips, initStickyNav, ProgressSteps, OnboardingModal } = await import('./js/ux-components.js');

                    initMobileNav();
                    initWorkflowSelector();
                    initEditorBanner();
                    initTooltips();
                    initStickyNav();

                    // Initialize progress steps
                    const progressSteps = new ProgressSteps('#progressSteps');
                    window.progressSteps = progressSteps; // Make accessible globally

                    // Update progress steps when image is uploaded
                    const originalUploadArea = document.getElementById('uploadArea');
                    if (originalUploadArea) {
                        // Hook into the existing file input change event
                        const fileInput = document.getElementById('fileInput');
                        if (fileInput) {
                            fileInput.addEventListener('change', () => {
                                // Show progress indicators when image is uploaded
                                const progressStepsEl = document.getElementById('progressSteps');
                                if (progressStepsEl && fileInput.files.length > 0) {
                                    progressStepsEl.style.display = 'flex';
                                    progressSteps.setStep(1); // Move to step 2 (Customize)
                                    progressSteps.completeStep(0); // Mark step 1 as completed
                                }
                            });
                        }
                    }

                    // Update progress when download button is clicked
                    const downloadBtn = document.getElementById('downloadBtn');
                    if (downloadBtn) {
                        downloadBtn.addEventListener('click', () => {
                            progressSteps.setStep(2); // Move to step 3 (Download)
                            progressSteps.completeStep(1); // Mark step 2 as completed
                        });
                    }
                } catch (error) {
                    console.log('UX components not available (file:// protocol), using basic functionality');
                }
            } else {
                console.log('Running on file:// protocol - UX enhancements disabled');
            }
        });
    </script>

    <!-- ================================================== -->
    <!-- Photo Handler Module Integration -->
    <!-- ================================================== -->
    <script type="module">
        import { initIndexPagePhotoUpload, handleStartOver } from './js/photoHandler-index.js';

        // Photo handler instance
        let photoHandler = null;

        // Initialize photo handler when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            // Get current language for translations
            const currentLang = localStorage.getItem('preferredLanguage') || 'en';
            const trans = translations[currentLang] || translations.en;

            // Initialize photo upload with createComposite callback
            photoHandler = initIndexPagePhotoUpload(trans, (image, dataURL, metadata) => {
                console.log('Photo loaded via photoHandler:', metadata);

                // Set the uploadedImage for existing code
                uploadedImage = image;

                // Call existing createComposite function
                createComposite();
            });

            console.log('Photo handler initialized for index page');
        });

        // Connect the "Start Over" button to photo handler
        const resetBtn = document.getElementById('resetBtn');
        if (resetBtn) {
            resetBtn.addEventListener('click', () => {
                console.log('Start Over clicked');

                handleStartOver(photoHandler, () => {
                    // Additional reset logic
                    uploadedImage = null;

                    // Clear canvas
                    const canvas = document.getElementById('previewCanvas');
                    const ctx = canvas?.getContext('2d');
                    if (ctx && canvas) {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                    }

                    // Hide preview section
                    const previewSection = document.getElementById('previewSection');
                    if (previewSection) {
                        previewSection.classList.remove('active');
                    }

                    // Track reset event
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'form_reset', {
                            'event_category': 'Photo Upload',
                            'event_label': 'Start Over'
                        });
                    }

                    // Scroll back to upload area
                    const uploadArea = document.getElementById('uploadArea');
                    if (uploadArea) {
                        uploadArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                });
            });
        }

        // Update upload text when language changes
        // Hook into existing translatePage function
        const originalTranslatePage = window.translatePage;
        if (typeof originalTranslatePage === 'function') {
            window.translatePage = function(lang) {
                // Call original translation function
                originalTranslatePage(lang);

                // Update photo handler text
                if (photoHandler && translations[lang]) {
                    const trans = translations[lang];
                    photoHandler.updateText({
                        uploadText: trans.uploadText || 'Choose Your Photo',
                        uploadHint: trans.uploadHint || 'Click here or drag and drop your 2√ó2" photo',
                        successMessage: trans.uploadSuccess || 'Photo uploaded successfully'
                    });
                }
            };
        }

        // Make photoHandler accessible globally for debugging
        window.photoHandler = photoHandler;
    </script>
</body>
</html>
